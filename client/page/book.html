<div id="bookPage">
    <div class="row mb-4">
        <div class="col-12">
            <div class="row">
                <div class="mr-4 col-2">
                    <img>
                </div>
                <div class="col-10">
                    <h3 class="mb-2"></h3>
                    <div class="book__category d-inline-block border border-danger px-3 py-1 text-danger rounded-3 me-2 mb-2"></div>
                    <ul class="list-unstyled d-flex mb-4">
                        <li class="me-5 d-flex align-items-center flex-column"><div class="font-weight-semibold h4 mb-1 book_numberChapter">562</div><div>Chương</div></li>
                        <li class="me-5 d-flex align-items-center flex-column"><div class="font-weight-semibold h4 mb-1 book_numberRead">562</div><div>Người đã đọc</div></li>
                    
                    </ul>
                    <div class="book__auth mb-2"></div>
                    <ul class="list-unstyled d-flex align-items-center mb-2 event">
                        <li><a  class="me-3 w-150 btn btn-danger btn-md btn-block font-weight-semibold doc d-flex align-items-center justify-content-center">Đọc</a></li>
                        <li class="me-3 w-150 btn btn-outline-secondary btn-md btn-block font-weight-semibold d-flex align-items-center justify-content-center">Đánh dấu</li>

                    </ul>
                    
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="row">
                <div class="col-8">
                    <h3>Giới thiệu</h3>
                    <div class="book__summary"></div>
                    <div class="row mt-4" >
                        <h5>Chapter</h5>
                        <table class="table mt-1" >
                            <tbody id="chapter">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    if($('#showbook').value != ''){
        bookService.getBook($('#showbook').value).then(res =>{
            if(!res.code || res.code != 'success') return;
            var data = res.data;
            $('#bookPage .row .col-12 .row .col-2 img').src = data.bookPoster
            $('#bookPage .row .col-12 .row .col-10 h3').innerHTML = data.name
            $('#bookPage .row .col-12 .row .col-10 .book__category').innerHTML = data.category
            $('#bookPage .row .col-12 .row .col-10 .book__auth').innerHTML = `<i class='bx bxs-user me-1'></i>${data.ather_name}`
            $('#bookPage .row .col-12 .row .col-10 .book_numberChapter').innerHTML = `${data.numberChapter}`
            $('#bookPage .row .col-12 .row .col-10 .book_numberRead').innerHTML = `${data.numberRead}`
            $('#bookPage  .col-8 .book__summary').innerHTML = data.summary;
            $('#bookPage  .event .doc ').href = data.chapter.path;

        })
        bookService.getChapter($('#showbook').value).then(res => {
            if(!res.code || res.code != 'success') return;
            var data = res.data;
            var chapterDiv = function(data2){
                return `<tr>
                    <td class="align-middle text-tertiary  w-25">${data.category}</td>
                    <td class="align-middle"><a class="text-overflow-1-lines">${data.name}</a></td>
                    <td class="align-middle w-25"><a class="text-overflow-1-lines">${data2.name}</a></td>
                    <td class="align-middle text-tertiary">${data.ather_name}</td>
                </tr>`;
            }
            $('#chapter').innerHTML = data.listChapter.map(value => chapterDiv(value)).join(" ")
        })

    }
</script>